# Getting started with React Three Fiber

Hello, welcome to this meetup! Let's build together a simple 3D table configurator using React Three Fiber!

## Project setup

To run this starter project simply run:

```bash
yarn
```

To install all the dependencies and then:

```bash
yarn dev
```

To start the development server.

![starter-project](/assets/starter-project.jpg)

_You should see a cube in the middle of the screen._

## Ultra quick introduction to React Three Fiber

The following code in the `src/components/Experience.jsx` is responsible for rendering the cube:

```jsx
<mesh>
  <boxGeometry />
  <meshStandardMaterial color="white" />
</mesh>
```

In _3D_ world, a mesh is an object that is made up of a **Geometry** and a **Material**.

- A **Geometry** is the shape of the object, in this case a cube. It can be a sphere, a plane, a cylinder, etc.
- A **Material** is like clothing for the object and it defines how the object looks like (color, metallic, roughness, etc.) in this case a simple material that shows a **white color**.

### Axes, Position, rotation and scale

In a 3D space, there are three axes: `x`, `y`, and `z`. Each axis is a line that extends infinitely in both directions.

![3D axes](/assets/axes.jpg)

With **Three.js** the axes are defined as follows:

- `x`: points to the right
- `y`: points up
- `z`: points towards the viewer

We can move the cube around by changing its position. It takes an array of three values: `[x, y, z]`:

```jsx
<mesh position={[5, 0, 0]}>
  <boxGeometry />
  <meshStandardMaterial color="white" />
</mesh>
```

We can also rotate the cube by changing its rotation.

The `rotation`values are in radians. To convert degrees to radians, you can use the `THREE.MathUtils.degToRad()` method:

```jsx
import { OrbitControls } from "@react-three/drei";

import * as THREE from "three";

export const Experience = () => {
  return (
    <>
      <OrbitControls />
      <mesh
        position={[1, 1, 0]}
        rotation={[0, THREE.MathUtils.degToRad(90), 0]}
      >
        <boxGeometry />
        <meshStandardMaterial color="white" />
      </mesh>
    </>
  );
};
```

We can also scale the cube by changing its scale:

```jsx
<mesh
  position={[1, 1, 0]}
  rotation={[0, THREE.MathUtils.degToRad(90), 0]}
  scale={[0.5, 0.5, 0.5]}
>
  <boxGeometry />
  <meshStandardMaterial color="white" />
</mesh>
```

This is the quickest possible introduction to React Three Fiber, don't worry if you're lost! We'll go through everything together through this hands-on workshop.

## Loading the table model

We'll use a **3D model of a table** that we'll load into our scene.

The `table.glb` model is available in the `public/models` folder.

Instead of coding it from scratch, we'll use a **command line tool** called [gltfjsx](https://github.com/pmndrs/gltfjsx) made by the creator of React Three Fiber.

It will generate the code for us to load the model into our scene:

```bash
npx gltfjsx public/models/table.glb -o src/components/Table.jsx -k -r public
```

We use `npx` to run `gltfjsx` without installing it globally.

The `-o` flag is used to specify the output file, in this case `src/components/Table.jsx`.

The `-k` flag is used to keep the name on the **meshes**.

The `-r` flag is used to specify the **root** folder of the model, in this case `public`.

The generated code looks like this:

```jsx
/*
Auto-generated by: https://github.com/pmndrs/gltfjsx
Command: npx gltfjsx@6.2.3 public/models/table.glb -o src/components/Table.jsx -k -r public
*/

import React, { useRef } from "react";
import { useGLTF } from "@react-three/drei";

export function Model(props) {
  const { nodes, materials } = useGLTF("/models/table.glb");
  return (
    <group {...props} dispose={null}>
      <mesh
        name="Plate"
        geometry={nodes.Plate.geometry}
        material={materials.Plate}
      />
      <mesh
        name="Legs01Left"
        geometry={nodes.Legs01Left.geometry}
        material={materials.Metal}
        position={[-1.5, 0, 0]}
      />
      <mesh
        name="Legs01Right"
        geometry={nodes.Legs01Right.geometry}
        material={materials.Metal}
        position={[1.5, 0, 0]}
      />
      <mesh
        name="Legs02Left"
        geometry={nodes.Legs02Left.geometry}
        material={materials.Metal}
        position={[-1.5, 0, 0]}
      />
      <mesh
        name="Legs02Right"
        geometry={nodes.Legs02Right.geometry}
        material={materials.Metal}
        position={[1.5, 0, 0]}
      />
      <mesh
        name="Legs03Left"
        geometry={nodes.Legs03Left.geometry}
        material={materials.Metal}
        position={[-1.5, 0, 0]}
      />
      <mesh
        name="Legs03Right"
        geometry={nodes.Legs03Right.geometry}
        material={materials.Metal}
        position={[1.5, 0, 0]}
      />
    </group>
  );
}

useGLTF.preload("/models/table.glb");
```

It uses the `useGLTF` hook from the [React Three Drei library](https://github.com/pmndrs/drei) to load the model.

And it assigns the `geometry`, `material`, and `position` to each **mesh** it found in the model.

We can now import the `Model` component in our `Experience` component. Let's replace our cube with the table:

```jsx
import { OrbitControls } from "@react-three/drei";
import { Model } from "./Table";

export const Experience = () => {
  return (
    <>
      <OrbitControls />
      <Model />
    </>
  );
};
```

https://github.com/wass08/meetup-r3f-workshop/assets/6551176/da5b711b-a7fd-44d6-8109-796858399a6e
